<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Profile | ShopEase</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script>
        if (location.hostname === "127.0.0.1") {
            location.replace(
                location.protocol +
                "//localhost:" +
                location.port +
                location.pathname +
                location.search
            );
        }
    </script>
</head>

<body>

    <!-- ===== HEADER ===== -->
    <header>
        <div style="display:flex;align-items:center;gap:10px">
            <a href="index.html" style="display:flex;align-items:center;gap:10px;text-decoration:none;"><img src="logo.png" alt="ShopEase Logo">
      <h2 style="color:#2563eb">ShopEase</h2></a>
        </div>

        <nav>
            <a href="index.html">Home</a>
            <a href="product.html">Products</a>
            <a href="wishlist.html">Wishlist</a>
            <a href="cart.html">Cart</a>

            <div class="profile-menu" id="profileMenu" style="display:none">
                <span id="profileName" onclick="toggleDropdown()">ðŸ‘¤ User â–¾</span>

                <div class="dropdown" id="dropdownMenu">
                    <a href="profile.html">Profile</a>
                    <a href="#" onclick="logout()">Logout</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- ===== PROFILE SECTION ===== -->
    <div class="container">
        <div class="profile-container">
            <h2>My Profile</h2>
            <div class="profile-card">
                <!-- <div class="profile-avatar">ðŸ‘¤</div> -->
<div class="profile-avatar" style="text-align:center; margin-bottom:20px;">

    <img id="profileImage"
         src="default-avatar.png"
         alt="Profile Image"
         style="width:130px;height:130px;border-radius:50%;object-fit:cover;display:block;margin:0 auto 10px; border:3px solid #2563eb;">

    <label id="uploadbtn" for="imageUpload" 
           style="display:inline-block;padding:8px 15px;background:#2563eb;color:white;border-radius:6px;cursor:pointer;">
        Upload Image
    </label>

    <input type="file"
           id="imageUpload"
           accept="image/*"
           style="display:none;">

</div>
                <div class="profile-details">
                    <div class="detail-group">
                        <label>Full Name</label>
                        <p id="userName">Loading...</p>
                    </div>
                    <div class="detail-group">
                        <label>Email Address</label>
                        <p id="userEmail">Loading...</p>
                    </div>

                </div>
            </div>
            <button onclick="logout()" class="logout-btn">Logout</button>
        </div>
    </div>

    <!-- ===== FOOTER ===== -->
    <footer>
        <p>Â© 2026 ShopEase. All Rights Reserved.</p>
    </footer>

    <script src="auth.js"></script>
    <script src="profile.js"></script>

    <script>
        const profileMenu = document.getElementById("profileMenu");
        const profileNameHeader = document.getElementById("profileName");

        if (isLoggedIn()) {
            profileMenu.style.display = "inline-block";
            profileNameHeader.innerText = "ðŸ‘¤ " + getUserName() + " â–¾";
        } else {
            window.location.href = "login.html";
        }

        document.addEventListener("click", (e) => {
            const dropdown = document.getElementById("dropdownMenu");
            if (!e.target.closest(".profile-menu")) {
                dropdown.style.display = "none";
            }
        });
    </script>

</body>

</html>